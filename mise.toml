[tools]
python = "3.12"
uv = "latest"
pre-commit = "latest"
aws-cli = "2.33.12"
"git-cliff" = "latest"

[settings]
experimental = true
lockfile = true
python.uv_venv_auto = true
idiomatic_version_file_enable_tools = ["python"]

[hooks]
enter = "bash ./scripts/enter_project.sh"

[env]
UV_LINK_MODE = "copy"

[tasks.cc]
description = "Run the costcutter app"
run = "uv run python -m costcutter"

[tasks.cli]
description = "Run the CostCutter CLI (Typer) from local source"
run = "uv run python -m costcutter.cli"

[tasks.test]
description = "Run unit tests"
run = "uv run pytest -q"

[tasks.test_cov]
description = "Run tests with coverage"
run = "uv run pytest --cov=costcutter --cov-report=term-missing"

[tasks.lint]
description = "Run ruff linter"
run = "uv run ruff check ."

[tasks.fmt]
description = "Format code with ruff"
run = "uv run ruff format ."

[tasks.fix]
description = "Auto-fix issues with ruff and format"
run = ["uv run ruff check --fix .", "uv run ruff format ."]
