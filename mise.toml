[tools]
python = "3.13"
uv = "latest"
pre-commit = "latest"
aws-cli = "latest"
node = "lts"
"ubi:pnpm/pnpm" = "latest"

[settings]
experimental = true
lockfile = true
python.uv_venv_auto = true
idiomatic_version_file_enable_tools = ["python"]

[hooks]
enter = "bash ./scripts/setup_project.sh"

[env]
UV_LINK_MODE = "copy"
_.path = ['{{config_root}}/node_modules/.bin']

[tasks.run]
description = "Run the awsbreaker app"
run = "uv run python -m awsbreaker"

[tasks.cli]
description = "Run the AWSBreaker CLI (Typer) from local source"
run = "uv run python -m awsbreaker.cli"

[tasks.test]
description = "Run unit tests"
run = "uv run pytest -q"

[tasks.test_cov]
description = "Run tests with coverage"
run = "uv run pytest --cov=awsbreaker --cov-report=term-missing"

[tasks.lint]
description = "Run ruff linter"
run = "uv run ruff check ."

[tasks.fmt]
description = "Format code with ruff"
run = "uv run ruff format ."

[tasks.fix]
description = "Auto-fix issues with ruff and format"
run = ["uv run ruff check --fix .", "uv run ruff format ."]

[tasks.docs]
description = "Docs dev Mode"
run = "vitepress dev docs --host 0.0.0.0 --port 5555 --cors"
